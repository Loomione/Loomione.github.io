---
title: Golang 学习笔记
tags: Golang
aside:
  toc: true
---

博主之前使用的语言主要是C++，目前想要学习一下Golang，这篇文章主要是记录一下Golang和C++基础语法的一些区别。

<!--more-->


## 1. Golang 简介


## 2. Golang 基础语法

### 2.1. 行分隔符

Golang 使用`换行符`作为行分隔符，而C++使用分号作为行分隔符。

- 如果打算将多个语句写在同一行，可以使用分号作为语句之间的分隔符。
- 如果一行的长度超过了编辑器的显示范围，可以使用反斜杠 `\` 作为换行符。

```go
fmt.Println("Hello, World!")

fmt.Println("Hello, World!"); fmt.Println("Hello, World!")

fmt.Println(" \
    Hello, World! \ 
")
```

```cpp
std::cout << "Hello, World!" << std::endl;
```

### 2.2. 注释

Golang 和 C++ 都支持单行注释和多行注释，语法也都一样。


### 2.1. 包

Golang 程序是通过包（package）来组织的，包类似于其它编程语言中的库（library）或模块（module）的概念。一个包可以包含多个文件，一个文件夹下的所有文件都属于同一个包。

在C++中，我们使用 `#include` 来引入头文件，而在Golang中，我们使用 `import` 来引入包。

```go
import "fmt"
```

```cpp
#include <iostream>
```

另外，在Golang中，可以使用 `import 圆括号`引入多个包，如下所示：

```go
import (
    "fmt"
    "math"
)
```

上面的代码中，我们引入了 `fmt` 和 `math` 两个包。这个写法等价于：

```go
import "fmt"
import "math"
```

导出名
: 在 Golang 中，如果一个标识符以大写字母开头，那么它就是导出的（public）。在导入一个包时，你只能引用其中已导出的名字。任何“未导出”的名字在该包外均无法访问。

### 2.2. 函数

- Golang 的函数需要用关键字`func`声明，而C++中的函数不需要关键字声明。
- Golang 中参数的类型在变量名之后，与变量名之间用空格隔开，这里和C++有所不同。
  - 当两个或多个连续的函数命名参数具有相同的类型时，除最后一个类型之外，其他类型可以**省略**。
- Golang 函数的返回值类型在参数列表之后，与参数列表之间用空格隔开，C++11也支持这种尾置返回类型的写法，不过参数类型和参数列表之间用箭头 `->` 隔开，在C++17中，可以使用 `auto` 关键字代替返回值类型。
  
```go
func add(x int, y int) int {
    return x + y
}

func add(x, y int) int { // 省略了 y 的类型
    return x + y
}
```

```cpp
auto add(int x, int y) -> int {
    return x + y;
}
```
- Golang 函数可以返回多个值，而C++中只能返回一个值（但C++中可以使用 `std::tuple` 或 `std::pair` 来实现这样的效果）。
  - Golang 中的多返回值使用圆括号括起来。
  
```go
func swap(x, y string) (string, string) {
    return y, x
}
```

命名返回值
: Golang 允许命名返回值，这种情况下，函数的返回值就会被视为定义在函数顶部的变量。这种情况下，函数的返回值可以被看作是函数的局部变量。

```go
func split(sum int) (x, y int) {
    x = sum * 4 / 9
    y = sum - x
    return
}
```

### 2.3. 变量

- Golang 中的变量声明格式为 `var <变量名> <变量类型>`，而C++中的变量声明格式为 `<变量类型> <变量名>`。
  - > Golang 将类型放到变量名后的原因： 为了避免像 C 语言中那样含糊不清的声明形式，例如：int* a, b;。在这个例子中，只有 a 是指针而 b 不是。如果你想要这两个变量都是指针，则需要将它们分开书写
- Golang 和 C++ 都支持多变量声明。

```go
var a, b, c int
var d, e, f int = 1, 2, 3
```

```cpp
int a, b, c;
int d = 1, e = 2, f = 3;
```
- 在Golang中变量如果没有被显示初始化，会被赋予`零值`， 所有的内存在 Go 中都是经过初始化的。
  
| 数值类型 | 字符串类型 | 布尔类型 | 指针类型 | 接口类型 | 切片类型 | 映射类型 | 通道类型 | 函数类型 |
|---|---|---|---|---|---|---|---|---|
| 零值 | 0 | "" | false | nil | nil | nil | nil | nil |

- Golang 中的`变量类型`不是必须的，当变量能够被编译器推断出来时，可以省略变量类型。

```go
var a = 1                
var b = true
var c = "Hello, World!"
```

在Golang中，还可以使用`:=`来声明并初始化变量，这种方式只能在函数内部使用。

```go
a := 1
b := true
c := "Hello, World!"
```

Golang中可以使用`因式分解var关键字`来声明多个变量。

```go
var (
    vname1 v_type1
    vname2 v_type2
)
```
> 这种因式分解关键字的写法一般用于声明全局变量。

作用域
: Golang 中的变量的作用域和 C++ 中的变量作用域是一样的，指一个变量的作用范围。

局部变量
: 在函数体内声明的变量称之为局部变量。局部变量只能在函数内部使用。

全局变量
: 在函数体外声明的变量称之为全局变量。全局变量可以在整个包甚至外部包（被导出后）使用。

变量隐藏
: Golang 中允许在函数体内声明与外部变量同名的变量，此时，函数体内的变量会被优先考虑。这和C++中的变量隐藏是一样的。

```go
package main

import "fmt"

var a = "G"

func main() {
    var a = "O"
    fmt.Println(a) // O
}
```